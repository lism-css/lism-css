# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

このファイルはClaude Code (claude.ai/code)が作業する際のガイドラインを提供します。

## Common Development Commands

```bash
# Start development server
npm run dev

# Build everything (React components + CSS)
npm run build

# Build only Vite (React components)
npm run build:vite

# Build only CSS
npm run build:css

# Lint SCSS/CSS files
npm run lint:style

# Preview built files
npm run preview
```

### Working in Monorepo Context

This package is part of a pnpm workspace. From the root directory:

```bash
# Work in this package specifically
cd packages/lism-css && npm run dev

# Build all packages from root
pnpm build
```

## Important Notes

- This `packages/lism-css` directory is part of a monorepo structure and will be published as an npm package named `lism-css`.
- Configuration files for tools such as ESLint and Stylelint and Prettier are placed in the monorepo's root directory.
- **Do not edit files in the `dist/` directory** - These are auto-generated by build commands

## Architecture Overview

- Source Directory: `/src`
- Output Directory: `/dist`
- Directory for Additional Packages: `/packages`

### Component Structure Pattern

Each component follows this consistent structure:

```
components/ComponentName/
├── ComponentName.jsx  # Main React component
├── getProps.js        # Props processing logic
├── index.js           # Exports
├── style.scss         # Component-specific styles (optional)
└── script.js          # Client-side JavaScript (optional)
```

All components extend the base `Lism` component and use `getLismProps()` for prop processing.

### SCSS Architecture with CSS Layers

The styling system uses CSS `@layer` for predictable specificity:

- `lism.reset` → `lism.base` → `lism.state` → `lism.layout` → `lism.dynamic` → `lism.component` → (`lism.utility`)

Note: utilityクラスとpropsクラスは`@layer`を付けません。ただし、ユーザーが利用できるように `lism.utility` のlayerも用意だけはしています。

Two CSS outputs are generated:

- `main.css` - Modern browsers with `@layer` support.
- `main_no_layer.css` - Without `@layer`.

SCSS Setting files:

- `_props.scss`: List of property-value pairs to output as Prop Classes (.-{prop}:{val}).
- `_query.scss`: Container query breakpoint definitions, etc.
- `_auto_output.scss`: Processes to output styles based on the above two files

### Props System

The framework converts React props to CSS classes and styles:

- Responsive props: `{base: '20', md: '40', lg: '60'}` (can also be written as array: `['20', null, '40', '60']`)
- Utility(Prop Class) pattern: `-prop:value` (e.g., `-p:20`, `-bgc:base-2`) or `-prop_bp` (e.g., `-p_sm`, `-g_md`)
- Special props: `hov` (hover), `bd` (borders), `trs` (transition)

### Build Process

1. **Vite** handles React component bundling with ES modules
2. **scss-builder.cjs** compiles SCSS files using Dart Sass + PostCSS
3. Multiple entry points are exposed via package.json exports

### Key Abstractions

- **getLismProps.js**: Core prop-to-CSS transformation logic
- **Token system**: Design tokens in `src/scss/base/_tokens.scss` and `src/config/tokens.js`
