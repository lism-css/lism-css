---
title: 'Customize'
description: ...
sidebar:
  order: 50
---

import { Box, Flex } from "lism-css/astro";
import { Preview, PreviewArea, PreviewTitle, PreviewCode } from "~/components";

SCSSの変数を上書きすることで、出力するCSSのカスタマイズが可能です。



## `@layer`をオフにする

`lism-css/main.css`(`lism-css/scss/main.scss`)ではなく、`lism-css/main_no_layer.css`(`lism-css/scss/main_no_layer.scss`)を読み込むことで、`@layer`をオフにすることができます。



## 設定カスタマイズの書き方と各初期値

```scss
@use '../path-to/node_modules/lism-css/scss/setting' with (
	$breakpoints: (
		'sm': '480px',
		'md': '800px',
		'lg': '1120px',
	),
	$common_support_bp: 'md',
	$is_container_query: 1,
	$props: (
		...
	)
);

// lism の scssファイルを読み込む
@use '../path-to/node_modules/lism-css/scss/main';

// @layer を使わないようにするなら main ではなく main_no_layer を読み込んでください
// @use '../path-to/node_modules/lism-css/scss/main_no_layer';
```

（Astroの場合は`../path-to/node_modules/`は不要です。）


{/* 例えば、`sm`,`md`サイズのサポートだけで良い場合は、`$common_support_bp`を`md`に設定することで、`lg`以降のブレイクポイントのユーティリティクラスを出力しないようにできます。 */}


## カスタマイズ例

### ブレイクポイントを変更する

```scss
// 設定カスタマイズ
@use '../path-to/node_modules/lism-css/scss/setting' with (
	$breakpoints: (
		'sm': '400px', // smサイズを変更する
		'xl': '1200px', // xlサイズを追加で定義する
	),
	$common_support_bp: 'lg',  // lgサイズまでのユーティリティクラスを生成する
);

// lism の scssファイルを読み込む
@use '../path-to/node_modules/lism-css/scss/main';
```

### コンテナクエリではなくメディアクエリを使用する

```scss
// 設定カスタマイズ
@use '../path-to/node_modules/lism-css/scss/setting' with (
	$is_container_query: 0, // media query で出力する
);

// lism の scssファイルを読み込む
@use '../path-to/node_modules/lism-css/scss/main';

// @layer を使わないようにするなら以下を読み込んでください
// @use '../path-to/node_modules/lism-css/scss/main_no_layer';
```


### Prop Classの出力をカスタマイズする

```scss
// 設定カスタマイズ
@use '../path-to/node_modules/lism-css/scss/setting' with (
	$default_important: 1, // Prop クラスに対してデフォルトで !important を付与する
	$props: (
		'fz': (
			// fzのユーティリティクラスに対して !important を出力する
			important: 1,
		),
		'h': (
			// 'h'のブレイクポイント対応クラスを出力しないようにする
			bp: 0,
		),
		'i': (
			// 'inset'のクラスもブレイクポイントに対応させる
			bp: 1, 
		),
		'p': (
			// 'p'のユーティリティクラスは、 lg サイズまで出力する
			bp: 'lg', 
			//.-p:box{padding:2em} を出力
			utilities: ('box': '2em'),
		),
	)
);

// lism の scssファイルを読み込む
@use '../path-to/node_modules/lism-css/scss/main';
```

{/* <div class='is--container'>
<Box p={['u:box', '20', '30', '40', '50']} bd c='base' bgc='text'>box</Box>
<Box p='u:box' h={['auto', '1em']} bd>box</Box>
</div> */}


## ビルド処理について

ビルドコードによって、lism-cssのCSSと異なる内容になる可能性があります。

コアパッケージのビルド処理部分のコードは以下のようになっていますので、できるだけ同じ処理でビルドするようにしてください。

```js
//sass
const sass = require('sass');

// postcss
const postcss = require('postcss');
const autoprefixer = require('autoprefixer');
const cssnano = require('cssnano');
```

```js
	try {
		// dart sass コンパイル
		const compiledCSS = sass.compile(srcPath, {
			style: 'expanded', // 圧縮はcssnanoに任せる
		});

		// postcss実行
		postcss([autoprefixer, cssnano])
			.process(compiledCSS.css, { from: undefined })
			.then((postcssResult) => {
				writeCSS(distPath, postcssResult.css);
			});
	}
```
