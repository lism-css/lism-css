---
title: 'CSS Methodology'
description: ...
sidebar:
  order: 1
---
import { Lism, Box } from "lism-css/astro";
import { Preview, PreviewArea, PreviewTitle, PreviewCode, Reference, HelpText, Callout, IconBadge } from "~/components";

export const WhsNw = ({children}) => {
	return <span className='-whitespace:nowrap'>{children}</span>
}

LismがどのようなCSS設計になっているかを説明します。

{/* 重要なポイントは以下の通りです。

- CSSの階層構造をあらかじめ定義 (詳細度の複雑化を防ぐ)
- デザイントークンを使い回す (メンテナンス性・一貫性をの向上)
- 用途ごとに細分化されたクラスを使い回す（可読性・再利用性の向上） */}
{/* - 利用頻度の少ないCSSはインラインスタイルでもOKとする */}



## Lism CSSの階層構造

詳細度が複雑になりがちな問題への対策として、LismではCSSの階層構造を明確に定義しています。

{/* 
|Layer|役割|最大詳細度|
|---|---|---|
|Settings|SASSの設定変数, mixinなど直接スタイルに吐き出されないもの。||
|Base|トークンのセット, Reset CSS, HTML要素に対する基本スタイルの定義。|0-0-1|
|State|多数のモジュールに対してつけ外しできるような、汎用性の高いクラス。|0-1-0|
|Layout|レイアウトの構成単位となるようなクラス。|0-1-0|
|Element|デザイン要素として最小単位となるような役割を持つクラス。|0-1-0|
|Component|その他、より具体的な役割を持つコンポーネント。|0-1-0|
|Props|CSSプロパティティに紐づいたクラス。|0-1-0 !|
|Utility|その他の例外的なユーティリティクラス。|| */}

<table className="l--table">
	<thead>
		<tr>
			<th>Layer</th>
			<th>役割</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td>Settings</td>
			<td>SASSの設定変数, mixinなど直接スタイルに吐き出されないもの。</td>
			<td>-</td>
		</tr>
		<tr>
			<td>Reset<br/>`@lism.reset`</td>
			<td>reset CSS</td>
		</tr>
		<tr>
			<td>Base<br/>`@lism.base`</td>
			<td>トークン定義や変数セット、HTML要素の初期スタイルをセットするレイヤー。<br />Base Set Utility (`.set--{syle}`)
			クラスもここに入ります。</td>
		</tr>
		<tr>
			<td class='-whitespace:nowrap'>Modules<br/>`@lism.modules`</td>
			<td>
				モジュール群を定義するレイヤー。<br />
				この中でさらにレイヤーが分かれており、 `.is--{state}`, `.l--{layout}`, `.d--{dynamic}` が定義されます。
			</td>
		</tr>
		<tr>
			<td class='-whitespace:nowrap'>Custom Modules<br/>`@lism.custom`</td>
			<td>その他、ユーザーが定義する具体的な役割を持つカスタムモジュール・UIコンポーネント群 (`.c--{modules}`) 。</td>
		</tr>
		<tr>
			<td class='-whitespace:nowrap'>Utility<br/>`@lism.utility`</td>
			<td>その他、機能やスタイルが明確なユーティリティクラス`.u--{name}`を定義するレイヤー。</td>
		</tr>
		<tr>
			<td class='-whitespace:nowrap'>Props<br/>`-`</td>
			<td>単一のCSSプロパティティに紐づいた Prop Class (`.-{prop}:{val}`) 。レイヤー外で定義します。</td>
		</tr>
	</tbody>
</table>

<IconBadge /> Prop Class は、レイヤーから外すことで外部CSSとある程度共存できるようにします.

### Modules レイヤーでのさらなる階層構造

<table className="l--table">
	<thead>
		<tr>
			<th>Module Layer</th>
			<th>役割</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class='-whitespace:nowrap'>State Modules<br/>`@lism.modules.state`</td>
			<td>
				レイアウトを構成する役割を持ちつつ、複数のレイアウトモジュールに対してつけ外しできるような汎用性の高いモジュール群。<br />`.is|has--{state}` の形式で定義します。
			</td>
		</tr>
		<tr>
			<td class='-whitespace:nowrap'>Layout Modules<br/>`@lism.modules.layout`</td>
			<td>
				レイアウトの構成単位となるようなモジュール群。<br />`.l--{module}` の形式で定義します。
			</td>
		</tr>
		<tr>
			<td class='-whitespace:nowrap'>Atomic Modules<br/>`@lism.modules.atomic`</td>
			<td>
				レイアウトの構成単位としてそれ以上分解できない最小単位のモジュール群。<br />`.a--{module}` の形式で定義します。
			</td>
		</tr>
		<tr>
			<td class='-whitespace:nowrap'>Dynamic Modules<br/>`@lism.modules.dynamic`</td>
			<td>
				JavaScriptと組み合わせて動的な機能を持つ特殊なモジュール群。<br />`.d--{module}` の形式で定義します。
			</td>
		</tr>
	</tbody>
</table>



{/* 
基本的に、最大詳細度を超えないようにセレクタを調整してこの順番で読み込みます。
<Callout type='info'>例外的にあえて"最大詳細度"を超えてセレクタを定義する場合もあります。</Callout> */}

{/* それぞれカスケードレイヤー（`@layer`）を定義して読み込むようにすれば、詳細度をあまり気にせずに書けるようになります。*/}

## デザイントークン

タイポグラフィ、余白、カラー、シャドウなど、主要なプロパティに対して段階的なプリセット値やセマンティックなキーワードでCSSカスタムプロパティを定義しています。

トークンを流用することでデザインに**一貫性**が生まれ、使用しているプロパティの**意図**も読み取りやすくなります。また、あとからサイト全体を微調整する必要が出てきてもトークンの値を変更するだけでよくなり、**メンテナンス性**も高まります。

<Reference>
詳しくは[トークン解説ページ](/css/tokens/)を参照してください。
</Reference>


## CSSのクラス設計

Lismでは、レイアウト・デザインの構成要素を細分化していくつかの種類に分類しています。


### Module Class

|分類|形式|例|
|---|---|---|
|Modules State<HelpText>状態として付け外しできるようなレイアウト機能を持つもの</HelpText>|`.is\|has--{stateName}`|`.is--container`,<br />`.has--gutter`|
|Layout Modules<HelpText>レイアウトの構成単位となるようなモジュール</HelpText>|`.l--{name}`|`.l--grid`,<br />`.l--columns`|
|Atomic Modules<HelpText>レイアウトの最小単位となるモジュール</HelpText>|`.a--{name}`|`.a--divider`,<br />`.a--icon`|
|Dynamic<HelpText>JSと組み合わせた動きのあるモジュール</HelpText>|`.d--{name}`|`.d--accordion`,<br />`.d--modal`,<br />`.d--tabs`|
|Custom Modules<HelpText>その他、より具体的な役割を持つコンポーネント群</HelpText>|`.c--{name}`|`.c--button`,<br />`.c--note`|


#### 子要素を持つ場合

子要素も含めて一つのモジュールとして機能するものは、BEMでいうところの Element にあたる文字列をクラスに付け加えます。

- 形式: `.{pre}--{componentName}_{elementName}`
- 例: `.c--hoge_item`


#### バリエーションスタイル を用意する場合

モジュールのバリエーションスタイルを定義する場合、BEMでいうところの Modifier を付け加えたクラスを作成します。  
この時、元となるモジュールクラスも併記し、CSSコードの重複を避けるようにして運用します。

- 形式:`.{pre}--{name}--{variant}`  
- 例: `.c--button.c--button--outline`


### Dynamic State

`d--{module}`と合わせて、Javascriptで動的に付け外しされるようなクラス。

|分類|形式|例|
|---|---|---|
|Dynamic State<HelpText>jsによって動的に付け外しされるようなクラス</HelpText>|`.js-{state}`|`.js-active`,<br />`.js-opened`|


### Utility Class

|分類|形式|例|
|---|---|---|
|Base Utility<HelpText>初期スタイルや機能変数をセットするユーティリティクラス。<br/>`@lism.base`で定義されます。</HelpText>|`.set-{style}`|`.set-plain`,<br />`.set-transition`|
|Style Utility<HelpText>装飾的なスタイルをセットするユーティリティクラス。<br/>`@lism.utility`で定義されます。</HelpText>|`.u-{style}`|`.u-cbox`,<br />`.u-itemDivider`|

### Prop Class

Lism では、単一のCSSプロパティに対応するユーティリティクラスを **Props Class** として定義しています。

主要なプロパティに対して、よく使われる値や専用のトークン値に合わせたユーティリティクラスを定義しており、レスポンシブ対応できるようになっています。


Prop クラス には以下の3種類の形式があります。

|形式|説明|例|
|---|---|---|
|<WhsNw>`.-{prop}:{value}`</WhsNw>| 各プロパティごとの主要な値やトークンの値を利用するためのユーティリティクラス |<WhsNw>`.-fz:l`</WhsNw>,<br/>`.-d:none`|
|`.-{prop}`| 変数 `--{prop}` を受け取るためのクラス |`.-p`,<br/>`.-fz`|
|`.-{prop}_{bp}`| 変数 `--{prop}_{bp}` を受け取るためのクラス |<WhsNw>`.-p_sm`</WhsNw>,<br/>`.-p_md`|


<Callout type="warning">
	<div class="-fz:s">
	\* 全てのCSSプロパティに対応するクラスがデフォルトで用意されているわけではありません。  
	\* ブレークポイント対応クラスも、さらにその中で主要な一部のプロパティのみ標準でサポートされています。  
	</div>
</Callout>



<PreviewTitle>例えば以下のようなものがあります。</PreviewTitle>

```css
.-ta\:c { text-align: center; }
.-ta\:l { text-align: left; }
.-fz\:l { font-size: var(--fz--l); }
.-fz\:3xl { font-size: var(--fz--3xl); }

.-p{ padding: var(--p); }
@container (min-width: 480px) {
	.-p_sm{ padding: var(--p_sm); }
}
@container (min-width: 720px) {
	.-p_md{ padding: var(--p_md); }
}
```

<HelpText>（厳密には異なる形態のものもありますが、イメージとしてはこんな感じです。）</HelpText>


<Reference>
詳しくは[Prop Class 一覧ページ](/css/prop-class)を参照してください。
</Reference>


### レスポンシブ対応の Prop Class

直前に紹介した`.-{prop}_{bp}`形式のクラスと`--{prop}_{bp}`形式の変数によって、レスポンシブ対応を行えるようになっています。

<Preview>
	<PreviewTitle>実際の活用例は次の通りです。</PreviewTitle>
	<PreviewArea resize>
		<Lism p={[20, 40, 50]} bd>
			BOX
		</Lism>
	</PreviewArea>
	<PreviewCode label="HTML" slot="tab">
```html "-p_sm" "-p_md" "--p_sm" "--p_md"
<div class="-p:20 -p_sm -p_md -bd" style="--p_sm:var(--s40);--p_md:var(--s50);">
	BOX
</div>
```
	</PreviewCode>
	<PreviewCode label="JSX" slot="tab">
```jsx
<Box p={[20, 40, 50]} bd>
	BOX
</Box>
```
	</PreviewCode>
</Preview>

<Reference>
詳しくは[レスポンシブ対応解説ページ](/css/responsive/)を参照してください。
</Reference>



### その他の推奨規則

Lismパッケージに内蔵されているクラスではありませんが、次のような感じで`@lism.modules`に命名すると統一感がでると思います。

|分類|形式|例|
|---|---|---|
|ゾーニング|`.z--{zoneName}`|`.z--header`,<br />`.z--sidebar`,<br />`.z--article`|
|ページの分類|`.p--{type}-{id\|slug}`|`.p--front`,<br />`.p--archive`,<br />`.p--post-{id}`,<br />`.p--page-{slug}`|



## 命名規則について


### CSS変数の命名規則

変数名の各ブロックはキャメルケースで、`--{varName}`のように表現します。

- トークン値など、一つのプロパティに対するバリエーションを示すものは、`--{prop}-{token}`のようにハイフンを1つ使って表現します。
	- 例: `--fz--s`, `--fz--l`
	- ただし、spaceトークンのみ特殊になっており、。`s`はプロパティ名ではなく`space`の省略であること、特に頻出なトークンであることから、`--s{Num}`とします。
		- 例: `--s10`, `--s40`
- 特定の要素に対するプロパティで、`:root`で上書き可能な値は`--{target}-{prop}`の形式で表現します。
	- 例: `--link-td`, `--list-px-s`, `--h-ff`, `--sh-hsl`
- Propクラスと対応するCSSプロパティの値を表すものは`--{prop}`で表現し、クラス名と同じ省略形で表現します。
	- 例： `--p`, `--mx`
- Propクラスのブレイクポイント値は`-{prop}_{bp}`で表現します。 
- 特定のコンポーネント・モジュールの主要機能を担う変数やそれ自身のCSSプロパティに対する変数は、`--{propName}`のように単一ブロックで表現します。
	- 例: `--gutter`, `--colSize`, `--sideW`
- 特定のコンポーネント・モジュールの子要素（`c--hoge_item`など）に対するプロパティは`--_{item}-{prop}`の形式で表現します。
	- 例: `--_icon-size`
- スタイルの計算に使われる変数も`--_`で始めます。
- 特殊な状態管理に使うような変数は、`--{varName}_`のように`_`で終わります。
	- 例: `--isHov_`, `--notHov_`


### クラスの命名規則

プレフィックスについて

- `l--`, `a--` など、ハイフンが2つ（`--`) 繋ぎのものは、同階層のクラスは同じ要素に使用できないことを示します。
- `set-`, `is-`, `u-` など ハイフンが一つで始まるものは、同階層を同じ要素に使用できることを示します。



`-{prop}:{value}`の`{value}`部分について

- 小数点が付いた値 → `.`のままで。(CSS側で`\`使う必要あり)
	- 例: `.-prop:1.5`
- ネガティブ(マイナス)値の表記もそのままで。
	- 例: `.-prop:-1`



## 単語の省略について

Prop Class`-{prop}:{value}`と、それに対応したCSS変数やコンポーネントで指定できるプロパティのキー名の省略ルールについて、`{prop}`側と`{value}`側の2つについてそれぞれの省略ルールを説明します。

### `{prop}`部分について

レイアウト・タイポグラフィ・カラーに関わる主要なプロパティは、 [Emmet](https://docs.emmet.io/cheat-sheet/) のような 1~3文字への極端な省略名を用います。

- `font-size` → `fz`
- `background-color` → `bgc`
- `padding` → `p`
- `flex` → `fx`
- `grid-template-columns` → `gtc`

その他のプロパティは、そのままか、もしくは容易にプロパティが予測できる範囲で省略します。
ただし、元になるプロパティ名に入っている**ハイフン(`-`)は一部例外ルールを除いて基本的に全て省略**します。

- `clear` → `clear`
- `white-space` → `whitespace`
- `writing-mode` → `writing`


`max-`, `min-`プロパティは、そのままハイフンを使います。

- `max-width` → `max-w`
- `min-width` → `min-w`
- `max-height` → `max-h`
- `min-height` → `min-h`



#### 方向指定系のプロパティについて

また、方向指定プロパティも`-`で繋げて、`{prop}-{side}`ような命名規則になります。  
ただし、`p`,`m` のみ、 (`pt`,`px`)などの書き方がすでに一般的なため、最初のハイフンを省略します。

| 対象プロパティ         | 省略形 |
| ---------------------- | ------ |
| `gap`                  | `g`  |
| `column-gap`           | `g-x`  |
| `row-gap`              | `g-y`  |
| `overflow`             | `ov`  |
| `overflow-x`           | `ov-x`  |
| `border`               | `bd`  |
| `border-left`          | `bd-l`  |
| `border-inline`        | `bd-x`  |
| `border-inline-start`  | `bd-x-s`  |
| `padding`              | `p` |
| `padding-inline`       | `px` |
| `padding-inline-start` | `px-s` |
| `margin`               | `m` |
| `margin-top`           | `mt` |
| `margin-block`         | `my` |
| `margin-block-start`   | `my-s` |



### `{value}`部分について

`{value}`部分については、基本的には極端な省略はせず、`{prop}`部分が極端に省略されていても`{value}`部分があればその組み合わせを見てどのプロパティを示すか予測しやすいようになっています。


長いキーワード値のみ、意味がわかる程度に省略します。

- `display:none`に対応するクラス → `.-d:none`
- `display:inline-flex`に対応するクラス → `.-d:in-flex`
- `position:relative`に対応するクラス → `.-pos:rel`
- `text-align:center`に対応するクラス → `.-ta:center`


