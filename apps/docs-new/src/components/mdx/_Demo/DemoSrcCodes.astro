---
import { Icon } from 'lism-css/astro';
import { Tabs } from '@lism-css/ui/astro';
import SrcCode from '../SrcCode.astro';
import DemoDotLine from './DemoDotLine.astro';

interface Props {
	src?: string;
	srcFiles?: string[];
	showDots?: boolean;
}
const { src = '', srcFiles = [], showDots = false } = Astro.props;

// ファイルパスを生成する関数
// 拡張子のみ（css, js, htmlなど）の場合は /_src.{ext} として、
// それ以外（ファイル名を含む場合）は /{file} として読み込む
function getSrcPath(file: string): string {
	if (!file.includes('.')) {
		// 拡張子のみの場合
		return `src/pages/demo/${src}/_src.${file}`;
	}
	// フルファイル名の場合
	return `src/pages/demo/${src}/${file}`;
}
---

{showDots && <DemoDotLine />}

{/* srcFilesをループしてCodeFileを表示 */}
<div class="c--demoSrcCodes">
	<Tabs.Root className="d--tabs--src">
		{!src && <slot />}
		{
			src &&
				srcFiles.map((file) => {
					return (
						<Tabs.Item>
							<Tabs.Tab fz="xs" lh="s" px="15" py="10" ff="mono" d="inline-flex" ai="center" g="5">
								<Icon viewBox="0 0 256 256" width="1em" height="1em" scale="1.2">
									<path d="M181.66,146.34a8,8,0,0,1,0,11.32l-24,24a8,8,0,0,1-11.32-11.32L164.69,152l-18.35-18.34a8,8,0,0,1,11.32-11.32Zm-72-24a8,8,0,0,0-11.32,0l-24,24a8,8,0,0,0,0,11.32l24,24a8,8,0,0,0,11.32-11.32L91.31,152l18.35-18.34A8,8,0,0,0,109.66,122.34ZM216,88V216a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V40A16,16,0,0,1,56,24h96a8,8,0,0,1,5.66,2.34l56,56A8,8,0,0,1,216,88Zm-56-8h28.69L160,51.31Zm40,136V96H152a8,8,0,0,1-8-8V40H56V216H200Z" />
								</Icon>
								{file}
							</Tabs.Tab>
							<Tabs.Panel>
								<SrcCode path={getSrcPath(file)} title="" />
							</Tabs.Panel>
						</Tabs.Item>
					);
				})
		}
	</Tabs.Root>
</div>
