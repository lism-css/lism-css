---
import { Flow, Center, Icon } from 'lism-css/astro';

const PRESETS = {
	point: {
		icon: 'lightbulb',
		color: 'orange',

		viewBox: '0 0 256 256',
		path: 'M180,232a12,12,0,0,1-12,12H88a12,12,0,0,1,0-24h80A12,12,0,0,1,180,232Zm40-128a91.51,91.51,0,0,1-35.17,72.35A12.26,12.26,0,0,0,180,186v2a20,20,0,0,1-20,20H96a20,20,0,0,1-20-20v-2a12,12,0,0,0-4.7-9.51A91.57,91.57,0,0,1,36,104.52C35.73,54.69,76,13.2,125.79,12A92,92,0,0,1,220,104Zm-24,0a68,68,0,0,0-69.65-68C89.56,36.88,59.8,67.55,60,104.38a67.71,67.71,0,0,0,26.1,53.19A35.87,35.87,0,0,1,100,184h56.1A36.13,36.13,0,0,1,170,157.49,67.68,67.68,0,0,0,196,104Zm-20.07-5.32a48.5,48.5,0,0,0-31.91-40,12,12,0,0,0-8,22.62,24.31,24.31,0,0,1,16.09,20,12,12,0,0,0,23.86-2.64Z',
	},
	alert: {
		// icon: 'alert',
		color: 'red',
		viewBox: '0 0 256 256',
		path: 'M208.49,191.51a12,12,0,0,1-17,17L128,145,64.49,208.49a12,12,0,0,1-17-17L111,128,47.51,64.49a12,12,0,0,1,17-17L128,111l63.51-63.52a12,12,0,0,1,17,17L145,128Z',
	},
	warning: {
		// icon: 'warning',
		color: 'yellow',
		viewBox: '0 0 256 256',
		path: 'M148,200a20,20,0,1,1-20-20A20,20,0,0,1,148,200Zm-20-40a12,12,0,0,0,12-12V48a12,12,0,0,0-24,0V148A12,12,0,0,0,128,160Z',
	},
	check: {
		// icon: 'check-circle',
		color: 'green',
		viewBox: '0 0 256 256',
		path: 'M232.49,80.49l-128,128a12,12,0,0,1-17,0l-56-56a12,12,0,1,1,17-17L96,183,215.51,63.51a12,12,0,0,1,17,17Z',
	},
	help: {
		// icon: 'question',
		color: 'purple',
		viewBox: '0 0 256 256',
		path: 'M196,96c0,29.47-24.21,54.05-56,59.06V156a12,12,0,0,1-24,0V144a12,12,0,0,1,12-12c24.26,0,44-16.15,44-36s-19.74-36-44-36S84,76.15,84,96a12,12,0,0,1-24,0c0-33.08,30.5-60,68-60S196,62.92,196,96Zm-68,92a20,20,0,1,0,20,20A20,20,0,0,0,128,188Z',
	},
	info: {
		color: 'blue',
		viewBox: '0 0 256 256',
		path: 'M252,120a52.06,52.06,0,0,0-52-52H160.32c-3.44-.21-52.6-4-99.46-43.3A20,20,0,0,0,28,40V200a19.8,19.8,0,0,0,11.54,18.12,19.86,19.86,0,0,0,21.32-2.81A192.92,192.92,0,0,1,144,174.47v26.2a20,20,0,0,0,8.9,16.64,11.35,11.35,0,0,0,1.39.8l14.44,7.06A20,20,0,0,0,198.37,213l11.09-41.82A52.07,52.07,0,0,0,252,120ZM52,191.63V48.4c36.17,28.07,72.17,38.1,92,41.66V150C124.17,153.52,88.17,163.55,52,191.63ZM176.39,202.2,168,198.1V172h16.4ZM200,148H168V92h32a28,28,0,1,1,0,56Z',
	},
	note: {
		viewBox: '0 0 256 256',
		path: 'M230.15,70.54,185.46,25.86a20,20,0,0,0-28.28,0L33.86,149.17A19.86,19.86,0,0,0,28,163.31V208a20,20,0,0,0,20,20H216a12,12,0,0,0,0-24H125L230.15,98.83A20,20,0,0,0,230.15,70.54ZM91,204H52V165l84-84,39,39ZM192,103,153,64l18.34-18.34,39,39Z',
		// path: 'M227.31,73.37,182.63,28.68a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM192,108.68,147.31,64l24-24L216,84.68Z',

		color: 'gray',
	},
};

const { type = 'alert', keycolor, ...props } = Astro.props;

const presetData = type && PRESETS[type as keyof typeof PRESETS];
const _color = keycolor || presetData?.color || 'currentColor';
---

<Flow lismClass="c--callout u-cbox" flow="s" setShadow keycolor={_color} ai="center" fz="s" my="40" p="20" bd bdrs="10" {...props}>
	<Center lismClass="c--callout__icon" isSkipFlow c="base" lh="1">
		<Icon icon={presetData?.icon} viewBox={presetData?.viewBox} scale="1">
			{presetData?.path && <path d={presetData?.path} />}
		</Icon>
	</Center>
	<slot />
</Flow>

<style>
	.c--callout {
		position: relative;
		overflow: clip;
		border-width: 0px;
		border-inline-start-width: 2px;
		border-color: var(--keycolor);
		padding-inline-start: 1.875em;
		/* --shc: color-mix(in srgb, color-mix(in srgb, var(--keycolor) 70%, rgb(0 0 0)), transparent 92%); */

		li::marker {
			color: var(--keycolor);
		}
	}
	.c--callout__icon {
		/* color: #fff; */
		background: var(--keycolor);
		position: absolute;
		inset-inline-start: 0;
		top: 0;
		border-radius: 0 1px 12px 0;
		margin-inline-start: -2px;
		padding-inline-end: 1px;
		padding-block-end: 1px;
		width: 1.675em;
		height: 1.675em;
	}
	:global(.c--callout__title) {
		font-weight: var(--fw--bold);
		color: var(--keycolor);
	}
</style>
