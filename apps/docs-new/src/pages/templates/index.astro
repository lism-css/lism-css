---
/**
 * テンプレート一覧ページ
 *
 * カテゴリ別にテンプレートを一覧表示
 */
import BaseLayout from '@/layouts/BaseLayout.astro';
import { Stack, Grid, Text, HTML, Frame, LinkBox, Media, Lism } from 'lism-css/astro';
import { templates, categoryIds, type TemplateCategoryId } from '@/config/templates';
---

<BaseLayout title="Templates" description="Lism CSSを使ったWebサイトテンプレート集" excludeFromSearch>
	<Stack g="40" class="templates-index">
		{/* ページヘッダー */}
		<Stack tag="header" g="10">
			<h1 class="-fz:3xl -fw:bold">Templates</h1>
			<Text c="text-2">Lism CSSを使ったWebサイトテンプレート集です。</Text>
		</Stack>

		{/* カテゴリ別テンプレート一覧 */}
		<Stack g="40">
			{
				categoryIds.map((categoryId: TemplateCategoryId) => {
					const category = templates[categoryId];
					return (
						<Stack g="15" tag="section">
							{/* カテゴリタイトル */}
							<HTML.h lv="2" fz="xl" fw="bold" bd-b py="10">
								{category.label}
								<Text tag="span" fz="s" c="text-2" fw="normal" ml="10">
									({category.items.length})
								</Text>
							</HTML.h>

							{/* テンプレートカード一覧 */}
							<Grid layout="fluidCols" cols="24rem" g="20">
								{category.items.map((item) => (
									<LinkBox key={item.id} layout="stack" href={`/templates/${categoryId}/${item.id}`} p="20" g="20">
										<Frame ar="3/2" bd bdw="1px" bdrs="20" bdc="inherit" bgc="#fff">
											<Frame className="u--scalePreview" ar="3/2" data-scale-preview-type="list">
												<iframe
													src={`/preview/templates/${categoryId}/${item.id}/`}
													title={item.title}
													width="800"
													height="600"
													loading="lazy"
												/>
											</Frame>
										</Frame>
										<Lism class="u-trim -ff:mono -fz:s">{item.title}</Lism>
										{/* <Text fz="xs" c="text-2" class="-lh:s u-lineClamp" style="--lineClamp:2">
											{item.description}
										</Text> */}
									</LinkBox>
								))}
							</Grid>
						</Stack>
					);
				})
			}
		</Stack>
	</Stack>
</BaseLayout>

<style>
	.template-card {
		transition:
			transform 0.2s ease,
			box-shadow 0.2s ease;
	}
	.template-card:hover {
		transform: translateY(-4px);
		box-shadow: var(--bxsh--20);
	}

	.template-card_thumb {
		pointer-events: none;
	}

	/* .template-card_thumb iframe {
		width: 400%;
		height: 400%;
		transform: scale(0.25);
		transform-origin: top left;
		border: none;
	} */
</style>
